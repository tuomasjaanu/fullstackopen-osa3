{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAllPersons","axios","get","createPerson","person","post","updatePerson","id","put","deletePerson","delete","Notification","message","className","type","text","Person","deleteClicked","name","number","onClick","Phonebook","props","filteredPersons","persons","filter","toUpperCase","indexOf","filterBy","map","AddNewForm","onSubmit","addPerson","onChange","handleNameChange","value","newName","handleNumberChange","newNumber","Filter","handleFilterBy","App","useState","notification","setNotification","notify","setTimeout","notifySuccess","useCallback","notifyError","setPersons","setNewName","setNewNumber","setFilterBy","useEffect","console","log","then","response","data","catch","error","reason","event","target","preventDefault","personObject","existingIndex","findIndex","concat","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4c58b14b.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAllPersons = () => {\r\n    return axios.get(baseUrl)\r\n}\r\n  \r\nconst createPerson = person => {\r\n    return axios.post(baseUrl, person)\r\n}\r\n  \r\nconst updatePerson = (id, person) => {\r\n    return axios.put(`${baseUrl}/${id}`, person)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst personService = { \r\n    getAllPersons,\r\n    createPerson,\r\n    updatePerson,\r\n    deletePerson\r\n}\r\n\r\nexport default personService","import React, { useState, useEffect, useCallback } from 'react'\nimport personService from './services/persons'\n\nconst Notification = ({ message }) => {\n  if (!message) {\n    return (\n      <></>\n    )\n  }\n  return (\n    <div className={\"notification \"+message.type}>{message.text}</div>\n  )\n}\n\nconst Person = ({ person, deleteClicked }) => {\n  return (\n    <p>\n      {person.name}  {person.number} <button onClick={deleteClicked}>delete</button>\n    </p>\n  )\n}\n\nconst Phonebook = (props) => {\n  const filteredPersons = props.persons.filter(\n    person => (person.name.toUpperCase().indexOf(props.filterBy.toUpperCase()) !== -1)\n  )\n  return (\n    <div>\n      {filteredPersons.map(person => (<Person key={person.name} person={person} deleteClicked={() => props.deletePerson(person.id)} />))}\n    </div>\n  )\n}\n\nconst AddNewForm = (props) => {\n  return (\n    <form onSubmit={props.addPerson}>\n        <div>\n          name: <input onChange={props.handleNameChange} value={props.newName}/>\n        </div>\n        <div>\n          number: <input onChange={props.handleNumberChange} value={props.newNumber}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n    </form>\n  ) \n}\n\nconst Filter = (props) => {\n  return (\n    <div>\n          filter shown with: <input onChange={props.handleFilterBy} value={props.filterBy}/>\n    </div>\n  )\n}\n\nconst App = () => {\n  const [notification, setNotification] = useState(null)\n\n  const notify = (type, text) => {\n    setNotification({ type, text })\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)    \n  }\n\n  const notifySuccess = useCallback((text) => { notify('success', text) }, [])\n  const notifyError = useCallback((text) => { notify('error', text) }, [])\n\n  const [persons, setPersons] = useState([])\n\n  const [ newName, setNewName ] = useState('')\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const [ newNumber, setNewNumber ] = useState('')\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,      \n      number: newNumber,\n    }    \n\n    const existingIndex = persons.findIndex(person => (person.name===newName))\n\n    if(existingIndex !== -1) {      \n      personService.updatePerson(persons[existingIndex].id, personObject)\n        .then(response => {          \n          const newPersons = [...persons]\n          newPersons[existingIndex] = response.data\n          setPersons(newPersons)\n          notifySuccess(`Tietojen päivitys onnistui: ${response.data.name}`)\n        })\n        .catch(error => {\n          notifyError(\"Tietojen päivitys epäonnistui: \"+(error.response)?(error.response.data.reason):(error.message))\n          console.log(\"updatePerson failed\", error)      \n        })\n    \n      return\n    }\n\n    personService.createPerson(personObject)\n      .then(response => {  \n        setPersons(persons.concat(response.data))    \n        setNewName('')\n        setNewNumber('')    \n        notifySuccess(`Tietojen lisääminen onnistui: ${response.data.name}`)\n      })\n      .catch(error => {\n        notifyError(\"Tietojen tallennus epäonnistui: \"+(error.response)?(error.response.data.reason):(error.message))\n        console.log(\"createPerson failed\", error)\n      })\n  }\n\n  const [ filterBy, setFilterBy ] = useState('')\n\n  const handleFilterBy = (event) => {\n    setFilterBy(event.target.value)\n  }\n\n  useEffect(() => {\n    console.log(\"get all persons\")\n    personService.getAllPersons()\n      .then(response => {        \n        setPersons(response.data)\n        notifySuccess(\"Tietojen haku onnistui\")\n      })\n      .catch(error => {\n        notifyError(\"Tietojen haku epäonnistui: \"+(error.response)?(error.response.data.reason):(error.message))\n        console.log(\"getAllPersons failed\", error)\n      })\n  }, [notifyError, notifySuccess])\n\n  const deletePerson = (id) => {\n    personService.deletePerson(id)\n      .then(response => {\n        setPersons(persons.filter((person) => (person.id!==id)))\n        notifySuccess(\"Tietojen poisto onnistui\")\n      })\n      .catch(error => {\n        notifyError(\"Tietojen poisto epäonnistui: \"+(error.response)?(error.response.data.reason):(error.message))\n        console.log(\"deletePerson failed\", error)\n      })\n  }\n\n  return (\n    <div>\n      <Notification message={notification}/>\n      <h2>Phonebook</h2>\n      <Filter handleFilterBy={handleFilterBy} filterBy={filterBy}/>\n      <h2>Add new</h2>\n      <AddNewForm \n        addPerson={addPerson} \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange} \n        newName={newName} \n        newNumber={newNumber}/>\n      <h2>Numbers</h2>\n      <Phonebook persons={persons} filterBy={filterBy} deletePerson={deletePerson} />\n    </div>\n  )\n\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}